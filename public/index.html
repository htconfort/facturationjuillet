<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MYCONFORT - Facturation Professionnelle</title>
    <meta name="description" content="MYCONFORT - Syst√®me de facturation professionnelle avec signature √©lectronique et g√©n√©ration de PDF">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Google API Scripts -->
    <script src="https://apis.google.com/js/api.js"></script>
    <script src="https://apis.google.com/js/platform.js"></script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    
    <!-- html2pdf.js script -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script>
      // üéØ FONCTION GLOBALE POUR G√âN√âRER LE PDF - CONFIGURATION EXACTE
      function generateInvoicePDF() {
        console.log('üéØ G√âN√âRATION PDF AVEC CONFIGURATION EXACTE');
        
        const element = document.querySelector('.facture-apercu') || document.getElementById('pdf-preview-content');
        if (!element) {
          alert('‚ùå √âl√©ment facture non trouv√©. Assurez-vous qu\'une facture est affich√©e.');
          return;
        }
        
        // üìã CONFIGURATION EXACTE - IDENTIQUE √Ä VOTRE SCRIPT
        const opt = {
          margin: 0,
          filename: 'facture-myconfort.pdf',
          html2canvas: { 
            scale: 2, 
            useCORS: true,
            letterRendering: true,
            allowTaint: true,
            backgroundColor: '#ffffff',
            logging: false
          },
          jsPDF: { 
            unit: 'mm', 
            format: 'a4', 
            orientation: 'portrait',
            compress: true
          }
        };
        
        console.log('üîÑ G√©n√©ration PDF avec configuration exacte...');
        console.log('üìê Configuration utilis√©e:', opt);
        
        html2pdf().set(opt).from(element).save().then(() => {
          console.log('‚úÖ PDF g√©n√©r√© avec succ√®s - COH√âRENCE GARANTIE !');
          alert('‚úÖ PDF t√©l√©charg√© avec succ√®s ! Le fichier est coh√©rent avec l\'aper√ßu.');
        }).catch((error) => {
          console.error('‚ùå Erreur g√©n√©ration PDF:', error);
          alert('‚ùå Erreur lors de la g√©n√©ration du PDF');
        });
      }
      
      // Rendre la fonction disponible globalement
      window.generateInvoicePDF = generateInvoicePDF;
    </script>
  </body>
</html>
